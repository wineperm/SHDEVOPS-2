# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Задание

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информацию о сбое можно изучить по ссылкам ниже:

- [краткое описание на русском языке](https://habr.com/ru/post/427301/);
- [развёрнутое описание на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

## Ответ

[post-mortem.md](https://github.com/wineperm/SHDEVOPS-2/blob/main/mnt-homeworks/10-monitoring-06-incident-management/post-mortem.md)

Дата: 21 октября 2018 года

Проблема: Массовое удаление веб-хуков, повреждение репозиториев и потеря коммитов.

Причина: Ошибка в скрипте, используемом для удаления избыточных данных, что привело к удалению большого количества веб-хуков и повреждению репозиториев.

Хронология событий:

1. В 19:47 UTC администраторы GitHub начали рутинную операцию по удалению избыточных данных с диска. Целью операции было освобождение места на диске и улучшение производительности системы.
2. В 20:00 UTC операция была прервана из-за ошибки в скрипте, что привело к удалению большого количества веб-хуков. Ошибка была вызвана неправильной конфигурацией скрипта, что привело к тому, что он удалил не только избыточные данные, но и важные данные, необходимые для работы системы.
3. В течение следующих нескольких минут администраторы пытались исправить ошибку, но безуспешно. Они обнаружили, что повреждение репозиториев и потеря коммитов были вызваны удалением веб-хуков, и начали восстанавливать поврежденные репозитории из резервных копий.
4. В 20:16 UTC GitHub объявил о проблеме в своем статусе на Twitter, сообщив, что они испытывают проблемы с веб-хуками и что команда работает над решением проблемы.
5. В 20:34 UTC администраторы начали восстанавливать поврежденные репозитории из резервных копий. Они также начали работу над исправлением ошибки в скрипте, чтобы предотвратить повторение инцидента в будущем.
6. В 22:32 UTC GitHub сообщил, что проблема решена и что все репозитории были восстановлены. Они также опубликовали подробное описание произошедшего и меры, принятые для предотвращения повторения инцидента в будущем.

Последствия:

- Потеря коммитов: некоторые пользователи сообщили о потере коммитов, сделанных за несколько часов до инцидента.
- Повреждение репозиториев: некоторые репозитории были повреждены и требовали восстановления из резервных копий.
- Потеря веб-хуков: многие пользователи потеряли веб-хуки, что привело к нарушению работы интегрированных с GitHub систем.
- Потеря доверия к GitHub: многие пользователи выразили недовольство произошедшим и потеряли доверие к GitHub.

Уроки, извлеченные:

- Необходимость более тщательного планирования и тестирования рутинных операций по обслуживанию.
- Необходимость более быстрого реагирования на проблемы и улучшения коммуникации с пользователями во время инцидентов.
- Необходимость более надежного хранилища данных и резервных копий для предотвращения потери данных в будущем.
- Необходимость более тщательного контроля за изменениями в конфигурации системы и более тщательного тестирования изменений перед их внедрением.

Меры, принятые для предотвращения повторения инцидента:

- Улучшение системы мониторинга для более быстрого обнаружения ошибок.
- Улучшение системы резервного копирования для более надежного хранения данных.
- Улучшение процедур восстановления после сбоев для более быстрого восстановления поврежденных репозиториев.
- Улучшение коммуникации с пользователями во время инцидентов, включая более подробную информацию о причинах и последствиях проблемы.
- Улучшение системы управления веб-хуками, чтобы предотвратить массовое удаление веб-хуков в будущем.
- Улучшение процедур контроля за изменениями в конфигурации системы и более тщательное тестирование изменений перед их внедрением.

Заключение:

Сбой системы GitHub в 2018 году был вызван ошибкой в скрипте, используемом для удаления избыточных данных, что привело к удалению большого количества веб-хуков и повреждению репозиториев. Это привело к потере коммитов, повреждению репозиториев и потере веб-хуков, а также к потере доверия к GitHub со стороны многих пользователей. GitHub принял меры для предотвращения повторения инцидента, включая улучшение системы мониторинга, резервного копирования и процедур восстановления после сбоев, а также улучшение коммуникации с пользователями во время инцидентов и улучшение системы управления веб-хуками. Кроме того, GitHub улучшил процедуры контроля за изменениями в конфигурации системы и более тщательное тестирование изменений перед их внедрением.
